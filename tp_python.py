paquetes = [
    # Chubut - 1
    [1, 1, "Puerto Madryn", "8d/7n",
     [["Vuelo Aerolíneas Argentinas", 654879, "Vuelo ida y vuelta (2 hs). Incluye mochila, carry-on, equipaje a despachar y asiento a elección"],
      ["Vuelo Flybondi", 535000, "Vuelo ida y vuelta (2 hs). Incluye mochila, carry-on, equipaje a despachar y asiento a elección"],
      ["Micro Plusmar semicama", 75000, "Ida y vuelta (19 hs). Incluye mochila y valija mediana"],
      ["Micro Plusmar cama", 100000, "Ida y vuelta (19 hs). Incluye mochila y valija mediana"]],
     [["Hotel Dazzle by Wyndham ★★★★", 1000904, "Incluye desayuno, spa, gimnasio, admite mascotas, traslados al aeropuerto, vista al mar, cancelación gratis. Costo + impuestos"],
      ["Hotel Rayentray Hostal ★★", 420005, "Incluye desayuno, cancelación gratis. Costo + impuestos"]],
     ["Península Valdés + avistaje de ballenas", 170000,
      [["Snorkel con lobos marinos y peces", 205000],
       ["Excursión terrestre a Trelew y Gaiman", 175000],
       ["Punta Tombo por crucero (pingüinos)", 198000],
       ["Paseo náutico (avistaje de delfines)", 167000]]],
     1500000, False],

    # Chubut - 2
    [1, 2, "Esquel", "8d/7n",
     [["Vuelo Aerolíneas Argentinas", 420699, "Vuelo ida y vuelta (2h30m). Incluye mochila, carry-on, asiento a elección"],
      ["Vuelo Flybondi", 360000, "Vuelo ida y vuelta (2h30m). Incluye mochila, carry-on, asiento a elección"],
      ["Micro Plusmar semicama", 85000, "Ida y vuelta (21 hs). Incluye mochila y valija mediana"],
      ["Micro Plusmar cama", 110000, "Ida y vuelta (21 hs). Incluye mochila y valija mediana"]],
     [["My Pod House ★★★★", 145000, "Incluye desayuno, bar, traslados al aeropuerto, cancelación gratis. Costo + impuestos"],
      ["Departamento Antigua Estación", 665046, "1 dormitorio, living, cocina, parrilla, adaptado PMR, estacionamiento, cancelación gratis. Costo + impuestos"]],
     ["Centro de esquí La Hoya", 16000,
      [["Pase libre todo el día", 80000],
       ["Viaje expreso La Trochita (adultos)", 62500],
       ["Viaje expreso La Trochita (niños)", 44000],
       ["Viaje expreso La Trochita (universitarios)", 46000],
       ["Viaje expreso La Trochita (extranjeros)", 109000],
       ["Pueblo Alto (día completo)", 40000],
       ["Piedra Parada + Cañón de la Buitrera", 192000],
       ["Cabalgatas", 20000],
       ["Safari fotográfico", 25000]]],
     700000, False],

    # Chubut - 3
    [1, 3, "Trelew", "8d/7n",
     [["Vuelo Aerolíneas Argentinas", 734000, "Vuelo ida y vuelta (2 hs). Incluye mochila, carry-on, asiento a elección"],
      ["Vuelo JetSMART", 580058, "Vuelo ida y vuelta (2 hs). Incluye mochila, carry-on, asiento a elección"],
      ["Micro Plusmar semicama", 80000, "Ida y vuelta (20h30m). Incluye mochila y valija mediana"],
      ["Micro Plusmar cama", 110000, "Ida y vuelta (20h30m). Incluye mochila y valija mediana"]],
     [["Hotel Libertador ★★★", 498980, "Incluye desayuno, restaurante, bar, gimnasio, adaptado PMR, estacionamiento, cancelación gratis. Costo + impuestos"],
      ["El Colibrí (cabañas de la naturaleza)", 693798, "Incluye habitación, cocina, baño, pileta al aire libre, estacionamiento, cafeteras, cancelación gratis. Costo + impuestos"]],
     ["Paseo aéreo Aeroclub Trelew", 70000,
      [["Paseo náutico (avistaje de delfines)", 185000],
       ["Punta Tombo por tierra (pingüinos)", 150000],
       ["Dique Florentino Ameghino (día completo)", 100000],
       ["Centro Astronómico Trelew", 20000]]],
     1000000, False],

    # Chubut - 4
    [1, 4, "Comodoro Rivadavia", "8d/7n",
     [["Vuelo Aerolíneas Argentinas", 270058, "Vuelo ida y vuelta (2 hs). Incluye mochila, carry-on"],
      ["Vuelo JetSMART", 230000, "Vuelo ida y vuelta (2 hs). Incluye mochila, carry-on y asiento a elección"],
      ["Micro Plusmar semicama", 90000, "Ida y vuelta (26 hs). Incluye mochila y valija mediana"],
      ["Micro Plusmar cama", 130000, "Ida y vuelta (26 hs). Incluye mochila y valija mediana"]],
     [["Lucania Palazzo Hotel ★★★★", 1346000, "Incluye desayuno, gimnasio, restaurante, bar, adaptado PMR, estacionamiento privado, cancelación gratis. Costo + impuestos"],
      ["Departamento Paisaje 1", 466232, "Incluye 1 dormitorio, living, cocina, elementos para cocinar y estacionamiento. Costo + impuestos"]],
     ["Patagonia Salvaje 4x4 por Rutas", 200000,
      [["Buceo (Snorkel con lobos marinos y peces)", 215000],
       ["Excursión terrestre a Trelew y Gaiman", 195000],
       ["Punta Tombo por crucero (pingüinos)", 200000],
       ["Paseo náutico (avistaje de delfines)", 170000]]],
     2000000, False],

    # Río Negro - 1
    [5, 1, "San Carlos de Bariloche", "8d/7n",
     [["Vuelo Aerolíneas Argentinas", 654879, "Vuelo ida y vuelta (2h25m/2h05m). Incluye mochila, carry-on y equipaje a despachar"],
      ["Vuelo Flybondi", 239434, "Vuelo ida y vuelta (2h20m). Incluye mochila y carry-on"],
      ["Micro Chevallier semicama", 156150, "Ida y vuelta (19 hs). Incluye mochila y valija mediana"],
      ["Micro Chevallier cama", 215550, "Ida y vuelta (19 hs). Incluye mochila y valija mediana"]],
     [["Hotel Patagonia Signature ★★★★", 953346, "Incluye desayuno, spa, gimnasio, traslados al aeropuerto, vista al lago, cancelación gratis. Costo + impuestos"],
      ["Cabaña Petite ★★★", 781473, "Incluye cocina equipada, lavadora, estacionamiento, cancelación gratis. Costo + impuestos"]],
     ["Paseo náutico (avistaje de delfines)", 167000,
      [["Cerro Catedral (ascenso)", 31955],
       ["Excursión terrestre a Trelew y Gaiman", 175000],
       ["Punta Tombo por crucero (pingüinos)", 198000],
       ["Lago Nahuel Huapi – Isla Victoria y Bosque de Arrayanes", 185000]]],
     970000, False],

    # Río Negro - 2
    [5, 2, "El Bolsón", "8d/7n",
     [["Vuelo JetSMART + Micro Busplus", 481770, "Vuelo ida y vuelta (2 hs) + Micro ida y vuelta (2h40m). Vuelo incluye mochila, carry-on, asiento a elección. Micro incluye mochila y valija mediana"],
      ["Vuelo Aerolíneas Argentinas + Micro regional", 550000, "Vuelo ida y vuelta (2h20m) + Micro ida y vuelta (2h10m). Vuelo incluye mochila, carry-on, asiento a elección. Micro incluye mochila y valija mediana"],
      ["Micro ViaBariloche semicama + Micro Busplus", 127800, "Ida y vuelta (25 hs). Incluye mochila y valija mediana"],
      ["Micro ViaBariloche cama + Micro Busplus", 143400, "Ida y vuelta (25 hs). Incluye mochila y valija mediana"]],
     [["Altos del Sur Cabañas ★★★★★", 719969, "Incluye cocina equipada, terraza con vistas, estacionamiento. Costo + impuestos"],
      ["Hotel Buena Vida Social Club ★★★", 992861, "Incluye desayuno, bar, traslados al aeropuerto, cancelación gratis. Costo + impuestos"]],
     ["Lago Puelo + recorrido El Bolsón", 75387,
      [["Feria artesanal", 20000],
       ["Refugio Piltriquitrón", 60000],
       ["Tour cervecerías locales", 45000],
       ["Cabalgatas", 20000],
       ["Safari fotográfico", 25000]]],
     743000, False],

    # Río Negro - 3
    [5, 3, "Las Grutas", "8d/7n",
     [["Vuelo Aerolíneas Argentinas a Viedma + Micro regional", 620000, "Vuelo ida y vuelta (2h15m) + Micro ida y vuelta (1h30m). Vuelo incluye mochila, carry-on, equipaje a despachar y asiento a elección. Micro incluye mochila y valija mediana"],
      ["Vuelo Flybondi a Bahía Blanca + Micro regional", 570000, "Vuelo ida y vuelta (2h) + Micro ida y vuelta (4h10m). Vuelo incluye mochila, carry-on y asiento a elección. Micro incluye mochila y valija mediana"],
      ["Micro Andesmar semicama", 118000, "Ida y vuelta (15h52m). Incluye mochila y valija mediana"],
      ["Micro Andesmar cama", 161000, "Ida y vuelta (15h52m). Incluye mochila y valija mediana"]],
     [["Médanos Patagonia ★★★★", 1254140, "Cama doble + sofá cama, cocina equipada, balcón vista al mar, cafeteras, cancelación gratis. Con desayuno: $1.463.163 + impuestos"],
      ["Apart del Golfo ★★★★", 1012453, "Incluye aire acondicionado, TV, cocina equipada, minibar, cancelación gratis. Costo + impuestos"]],
     ["Salinas del Gualicho", 215140,
      [["Snorkel + Fuerte Argentino", 215141],
       ["4x4 por médanos", 95000],
       ["Cañadón de las Ostras + El Sótano", 114742],
       ["Paseo embarcado Bahía de San Antonio (avistaje de fauna marina)", 180000]]],
     882000, False],

    # Río Negro - 4
    [5, 4, "Viedma", "8d/7n",
     [["Vuelo Aerolíneas Argentinas directo", 450000, "Vuelo ida y vuelta (2 hs). Incluye mochila, carry-on, equipaje a despachar y asiento a elección"],
      ["Vuelo Flybondi a Bahía Blanca + Micro regional", 500000, "Vuelo ida y vuelta (2 hs) + Micro ida y vuelta (2h30m). Vuelo incluye mochila, carry-on y asiento a elección. Micro incluye mochila y valija mediana"],
      ["Micro Andesmar semicama", 96000, "Ida y vuelta (12h55m). Incluye mochila y valija mediana"],
      ["Micro Andesmar cama", 186000, "Ida y vuelta (12h55m). Incluye mochila y valija mediana"]],
     [["Departamento céntrico ★★★", 477260, "Incluye sofás cama, aire acondicionado, TV, cocina equipada, cancelación gratis"],
      ["Hotel y Casino del Río ★★★★", 1857985, "Incluye TV, minibar, desayuno, cancelación gratis"]],
     ["Faro Río Negro", 20000,
      [["Colonia de loros barranqueros", 25000],
       ["Kayak en la ría", 60000],
       ["Paseo histórico Manzana Fundacional Viedma y Carmen de Patagones", 40000],
       ["Avistaje fauna marina en desembocadura Río Negro", 85000]]],
     1135000, False]
]

def mostrar_paquete(fila, indice=1):
    destino = fila[2]
    transporte = fila[4][0]  
    alojamiento = fila[5][0]  
    excursion_principal = fila[6] 

    print("-" * 60)
    titulo = f"PAQUETE {indice}"
    print(titulo.rjust((60 + len(titulo)) // 2))
    print("-" * 60)

    print("Destino:".ljust(20), destino)
    print("Duración:".ljust(20), fila[3])

    print("\nTransporte:")
    for j, t in enumerate(fila[4], 1):
        print(f"  {j}. {t[0]} - ${t[1]} - {t[2]}")

    print("\nAlojamiento:")
    for j, h in enumerate(fila[5], 1):
        print(f"  {j}. {h[0]} - ${h[1]} - {h[2]}")

    print("\nExcursión principal:".ljust(20), f"{excursion_principal[0]} - ${excursion_principal[1]}")

    if len(excursion_principal) > 2 and isinstance(excursion_principal[2], list):
        print("\nExcursiones opcionales:")
        for j, e in enumerate(excursion_principal[2], 1):
            print(f"  {j}. {e[0]} - ${e[1]}")

    precio_aprox = transporte[1] + alojamiento[1] + excursion_principal[1]
    print("\nPrecio aproximado del paquete: $", precio_aprox)
    print("-" * 60)
    print()


def buscar_por_provincia(matriz, nro_provincia):
    return [fila for fila in matriz if fila[0] == nro_provincia]


def reservar_paquete(matriz, nro_provincia, nro_paquete):
    for fila in matriz:
        if fila[0] == nro_provincia and fila[1] == nro_paquete:
            if fila[8]:
                print("\nEse paquete ya está reservado.")
                return

            print("\nElija una opción de transporte:")
            for i, t in enumerate(fila[4], 1):
                print(f"{i}. {t[0]} - ${t[1]} - {t[2]}")
            t_sel = -1
            while t_sel < 0 or t_sel >= len(fila[4]):
                t_sel = int(input("Ingrese número de transporte: "))-1
                if t_sel < 0 or t_sel >= len(fila[4]):
                    print("Opción inválida. Intente nuevamente.")

            print("\nElija una opción de alojamiento:")
            for i, h in enumerate(fila[5], 1):
                print(f"{i}. {h[0]} - ${h[1]} - {h[2]}")
            h_sel = -1
            while h_sel < 0 or h_sel >= len(fila[5]):
                h_sel = int(input("Ingrese número de alojamiento: ")) - 1
                if h_sel < 0 or h_sel >= len(fila[5]):
                    print("Opción inválida. Intente nuevamente.")

            print("\nElija excursiones opcionales (separadas por coma, o 0 para ninguna):")
            for i, e in enumerate(fila[6][2], 1):
                print(f"{i}. {e[0]} - ${e[1]}")
            excursiones_extra = []
            opcionales = input("Ingrese números de excursiones: ").strip()
            while True:
                if opcionales == "0" or opcionales == "":
                    break
                indices = opcionales.split(",")
                if all(x.isdigit() and 1 <= int(x) <= len(fila[6][2]) for x in indices):
                    excursiones_extra = [fila[6][2][int(i)-1] for i in indices]
                    break
                else:
                    print("Opción inválida. Intente nuevamente.")
                    opcionales = input("Ingrese números de excursiones: ").strip()

            fila[8] = True
            fila.append(fila[4][t_sel])
            fila.append(fila[5][h_sel])
            fila.append(excursiones_extra)

            print(f"\nReserva confirmada para: {fila[2]}")
            print(f"Transporte elegido: {fila[4][t_sel][0]} - ${fila[4][t_sel][1]}")
            print(f"Alojamiento elegido: {fila[5][h_sel][0]} - ${fila[5][h_sel][1]}")
            if excursiones_extra:
                print("Excursiones adicionales elegidas:")
                for e in excursiones_extra:
                    print(f" - {e[0]} - ${e[1]}")
            else:
                print("No se eligieron excursiones adicionales.")
            return

    print("\nNo se encontró el paquete.")

def paquete_reservado(matriz, nro_provincia, nro_paquete):
    for fila in matriz:
        if fila[0] == nro_provincia and fila[1] == nro_paquete and fila[8]:
            destino = fila[2]
            transporte = fila[9]
            alojamiento = fila[10]
            excursion_principal = fila[6]  

            print("-" * 40)
            print("Agencia de Viajes".center(40))
            print()
            print("Av. 9 de julio 279".ljust(20), end="**")
            print("Tel. 46019-1146".rjust(20))
            print()
            print("Reserva N°", str(fila[1]).zfill(8))
            print()
            print("Destino:".ljust(15), destino)
            print("Transporte:".ljust(15), f"{transporte[0]} (${transporte[1]})")
            print("Alojamiento:".ljust(15), f"{alojamiento[0]} (${alojamiento[1]})")
            print("Excursión principal:".ljust(20), f"{excursion_principal[0]} (${excursion_principal[1]})")

            total_excursiones = excursion_principal[1]  
            print("Excursiones opcionales elegidas:")
            if len(fila) > 11 and fila[11]:
                for e in fila[11]:
                    print(f" - {e[0]} (${e[1]})")
                    total_excursiones += e[1]
            else:
                print(" - Ninguna")

            monto_total = transporte[1] + alojamiento[1] + total_excursiones
            print("-" * 40)
            print(f"Monto total: ${monto_total}")
            print("-" * 40)

            print("Para realizar el pago final comuníquese con el número en pantalla")
            conf = input("¿Confirma la reserva? (si/no): ").strip().lower()

            if conf == "si":
                print("\n✅ Reserva confirmada con éxito. ¡Buen viaje!")
            else:
                print("\n⚠ Reserva cancelada. Vuelva a seleccionar opciones.")
                fila[8] = False 
                reservar_paquete(matriz, nro_provincia, nro_paquete)
                paquete_reservado(matriz, nro_provincia, nro_paquete) 
            return
    print("\n❌ No hay ninguna reserva para mostrar.")


# Programa principal
opcion = 0
while opcion != 3:
    print("\n" + "-" * 50)
    print("SISTEMA DE PAQUETES TURÍSTICOS".rjust(35))  
    print("-" * 50)
    print("1. Ver paquetes por provincia".rjust(35))
    print("2. Reservar un paquete".rjust(35))
    print("3. Salir".rjust(35))
    print("-" * 50)
    
    opcion = int(input("Seleccione una opción (1-3): "))

    if opcion == 1:
        print("1=Chubut, 2=Santa Cruz, 3=Tierra del Fuego, 4=Neuquén, 5=Río Negro")
        prov = int(input("Ingrese número de provincia: "))
        resultados = buscar_por_provincia(paquetes, prov)
        if resultados:
            for i, r in enumerate(resultados, start=1):
                mostrar_paquete(r, i)

        else:
            print("No hay paquetes para esa provincia.")
    elif opcion == 2:
        print("1=Chubut, 2=Santa Cruz, 3=Tierra del Fuego, 4=Neuquén, 5=Río Negro")
        prov = int(input("Ingrese número de provincia: "))
        nro = int(input("Ingrese número de paquete: "))
        reservar_paquete(paquetes, prov, nro)
        paquete_reservado(paquetes, prov, nro)

    elif opcion == 3:
        print("¡Hasta luego!")
    else:
        print("Opción inválida.")

